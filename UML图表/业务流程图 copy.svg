<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2887px" preserveAspectRatio="none" style="width:515px;height:2887px;background:#FFFFFF;" version="1.1" viewBox="0 0 515 2887" width="515px" zoomAndPan="magnify"><defs/><g><ellipse cx="284" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="202" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144" x="212" y="72.457">初始化变量和载入配置文件</text><rect fill="none" height="139.7969" style="stroke:#000000;stroke-width:1.5;" width="175" x="196.5" y="95.0938"/><path d="M332.5,95.0938 L332.5,105.7031 L322.5,115.7031 L196.5,115.7031 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="199.5" y="110.627">初始化模型推断模块</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="155" x="206.5" y="132.7031"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="135" x="216.5" y="155.1602">生成face_recognizer实例</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="216" y="187.7969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="116" x="226" y="210.2539">生成fire_detector实例</text><rect fill="none" height="414.2969" style="stroke:#000000;stroke-width:1.5;" width="350" x="62.5" y="244.8906"/><path d="M161.5,244.8906 L161.5,255.5 L151.5,265.5 L62.5,265.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="65.5" y="260.4238">初始化log模块</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="226" y="282.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="236" y="304.957">检查各日志文件夹</text><rect fill="none" height="154.7969" style="stroke:#000000;stroke-width:1.5;" width="265" x="105" y="327.5938"/><path d="M119,327.5938 L119,338.2031 L109,348.2031 L105,348.2031 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="108" y="343.127"> </text><path d="M125,404.6211 L125,430.9727 L198,430.9727 L198,414.6211 L188,404.6211 L125,404.6211 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M188,404.6211 L188,414.6211 L198,414.6211 L188,404.6211 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="131" y="423.1162">日志归档</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="208" y="365.2031"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132" x="218" y="387.6602">超过七天的日志压损存储</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="214" y="435.2969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="224" y="457.7539">超过三十天的日志删除</text><rect fill="none" height="154.7969" style="stroke:#000000;stroke-width:1.5;" width="330" x="72.5" y="492.3906"/><path d="M86.5,492.3906 L86.5,503 L76.5,513 L72.5,513 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="75.5" y="507.9238"> </text><path d="M92.5,569.418 L92.5,595.7695 L165.5,595.7695 L165.5,579.418 L155.5,569.418 L92.5,569.418 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M155.5,569.418 L155.5,579.418 L165.5,579.418 L155.5,569.418 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="98.5" y="587.9131">日志轮转</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="202" y="530"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144" x="212" y="552.457">按照时间生此次日志文件夹</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="217" x="175.5" y="600.0938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="197" x="185.5" y="622.5508">设置日志轮转条件, 实例化logger对象</text><rect fill="#F1F1F1" height="92.7031" style="stroke:#181818;stroke-width:1.5;" width="257" x="155.5" y="669.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="237" x="165.5" y="685.7207">初始化数据流模块, 封装dataset迭代器</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="85" x="241.5" y="706.7969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="65" x="251.5" y="729.2539">传出dataset</text><rect fill="none" height="342.9023" style="stroke:#000000;stroke-width:1.5;" width="192" x="194" y="843.7266"/><path d="M274,843.7266 L274,854.3359 L264,864.3359 L194,864.3359 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="197" y="859.2598">帧推断模块</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="244" y="881.3359"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="254" y="903.793">接受传入帧</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="214" y="985.3477"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="224" y="1007.8047">传入人脸识别模块推断</text><polygon fill="#F1F1F1" points="223.5,936.4297,344.5,936.4297,356.5,948.4297,344.5,960.4297,223.5,960.4297,211.5,948.4297,223.5,936.4297" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="288" y="971.8486">是</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="121" x="223.5" y="952.9307">在非法闯入检测时间段内</text><polygon fill="#F1F1F1" points="284,1040.4414,296,1052.4414,284,1064.4414,272,1052.4414,284,1040.4414" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="214" y="1084.4414"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="224" y="1106.8984">传入火焰检测模块推断</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="226" y="1139.5352"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="236" y="1161.9922">整合拼接检测结果</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="238" y="1206.6289"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="248" y="1229.0859">传出检测结果</text><polygon fill="#F1F1F1" points="256.5,1261.7227,311.5,1261.7227,323.5,1273.7227,311.5,1285.7227,256.5,1285.7227,244.5,1273.7227,256.5,1261.7227" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="55" x="256.5" y="1278.2236">检测到物体</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="233.5" y="1271.3057">是</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="81" y="1295.7227"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144" x="91" y="1318.1797">在图像上绘制边界框和标签</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="105" y="1350.8164"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="115" y="1373.2734">更新检测队列缓冲</text><rect fill="none" height="879.8555" style="stroke:#000000;stroke-width:1.5;" width="278" x="45" y="1395.9102"/><path d="M153,1395.9102 L153,1406.5195 L143,1416.5195 L45,1416.5195 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="48" y="1411.4434">警告和日志模块</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="96.5" y="1433.5195"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="106.5" y="1455.9766">检测结果写入文本log</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="99" y="1586.4492"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="108" x="109" y="1608.9063">将当前帧保存为图像</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="212" x="57" y="1641.543"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="192" x="67" y="1664">发送带有图像和相关信息的电子邮件</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="111" y="1696.6367"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="84" x="121" y="1719.0938">重置耐心计数器</text><polygon fill="#F1F1F1" points="75,1537.5313,251,1537.5313,263,1549.5313,251,1561.5313,75,1561.5313,63,1549.5313,75,1537.5313" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="167" y="1572.9502">是</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="176" x="75" y="1554.0322">报警触发且尚未发送警报或耐心耗尽</text><polygon fill="#F1F1F1" points="163,1751.7305,175,1763.7305,163,1775.7305,151,1763.7305,163,1751.7305" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="176" x="75" y="1844.6484"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="156" x="85" y="1867.1055">开始录制并初始化视频编写器</text><polygon fill="#F1F1F1" points="135.5,1795.7305,190.5,1795.7305,202.5,1807.7305,190.5,1819.7305,135.5,1819.7305,123.5,1807.7305,135.5,1795.7305" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="167" y="1831.1494">是</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="55" x="135.5" y="1812.2314">未在录像中</text><polygon fill="#F1F1F1" points="163,1899.7422,175,1911.7422,163,1923.7422,151,1911.7422,163,1899.7422" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="105" y="1992.6602"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="115" y="2015.1172">继续将帧写入视频</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="81" y="2096.6719"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144" x="91" y="2119.1289">停止录制并释放视频编写器</text><polygon fill="#F1F1F1" points="102.5,2047.7539,223.5,2047.7539,235.5,2059.7539,223.5,2071.7539,102.5,2071.7539,90.5,2059.7539,102.5,2047.7539" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="167" y="2083.1729">是</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="121" x="102.5" y="2064.2549">达到最大长度或异常消失</text><polygon fill="#F1F1F1" points="163,2151.7656,175,2163.7656,163,2175.7656,151,2163.7656,163,2151.7656" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="135.5,1943.7422,190.5,1943.7422,202.5,1955.7422,190.5,1967.7422,135.5,1967.7422,123.5,1955.7422,135.5,1943.7422" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="167" y="1979.1611">是</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="55" x="135.5" y="1960.2432">正在录像中</text><polygon fill="#F1F1F1" points="163,2195.7656,175,2207.7656,163,2219.7656,151,2207.7656,163,2195.7656" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="102.5,1488.6133,223.5,1488.6133,235.5,1500.6133,223.5,1512.6133,102.5,1512.6133,90.5,1500.6133,102.5,1488.6133" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="167" y="1524.0322">是</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="121" x="102.5" y="1505.1143">检测到异常(火焰/陌生人)</text><polygon fill="#F1F1F1" points="163,2239.7656,175,2251.7656,163,2263.7656,151,2251.7656,163,2239.7656" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="124" x="343" y="1295.7227"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104" x="353" y="1318.1797">记录“未检测到物体”</text><polygon fill="#F1F1F1" points="284,2281.7656,296,2293.7656,284,2305.7656,272,2293.7656,284,2281.7656" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="183" x="192.5" y="2325.7656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="163" x="202.5" y="2348.2227">将结果图像转换为Base64编码</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="165" x="201.5" y="2380.8594"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="145" x="211.5" y="2403.3164">使用Socket发送图像到前端</text><polygon fill="#F1F1F1" points="238.5,781.8906,329.5,781.8906,341.5,793.8906,329.5,805.8906,238.5,805.8906,226.5,793.8906,238.5,781.8906" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19" x="288" y="817.3096">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="238.5" y="798.3916">从dataset中取得帧</text><ellipse cx="24" cy="840.8906" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="24" cy="840.8906" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#F1F1F1" height="428.7266" style="stroke:#181818;stroke-width:1.5;" width="386" x="89.5" y="2447.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="238" y="2464.4863">dataset迭代器</text><ellipse cx="284" cy="2495.5625" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="235" x="166.5" y="2540.5625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="215" x="176.5" y="2563.0195">opencv载入摄像头(视频文件)数据流cam</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="321" x="123.5" y="2672.4922"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="301" x="133.5" y="2694.9492">对帧进行resize, BGR转化RGB, 数值连续化等前处理操作</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="244" y="2742.5859"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="254" y="2765.043">传出帧数据</text><polygon fill="#F1F1F1" points="245,2610.6563,323,2610.6563,335,2622.6563,323,2634.6563,245,2634.6563,233,2622.6563,245,2610.6563" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19" x="288" y="2646.0752">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="245" y="2627.1572">cam.read取出帧</text><ellipse cx="284" cy="2846.6797" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="277.8128" x2="290.1872" y1="2840.4925" y2="2852.8669"/><line style="stroke:#222222;stroke-width:2.5;" x1="290.1872" x2="277.8128" y1="2840.4925" y2="2852.8669"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="30" y2="50"/><polygon fill="#181818" points="280,40,284,50,288,40,284,44" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="167.7969" y2="187.7969"/><polygon fill="#181818" points="280,177.7969,284,187.7969,288,177.7969,284,181.7969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="85.0938" y2="132.7031"/><polygon fill="#181818" points="280,122.7031,284,132.7031,288,122.7031,284,126.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="400.2969" y2="435.2969"/><polygon fill="#181818" points="280,425.2969,284,435.2969,288,425.2969,284,429.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="317.5938" y2="365.2031"/><polygon fill="#181818" points="280,355.2031,284,365.2031,288,355.2031,284,359.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="565.0938" y2="600.0938"/><polygon fill="#181818" points="280,590.0938,284,600.0938,288,590.0938,284,594.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="470.3906" y2="530"/><polygon fill="#181818" points="280,520,284,530,288,520,284,524" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="222.8906" y2="282.5"/><polygon fill="#181818" points="280,272.5,284,282.5,288,272.5,284,276.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="635.1875" y2="706.7969"/><polygon fill="#181818" points="280,696.7969,284,706.7969,288,696.7969,284,700.7969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="960.4297" y2="985.3477"/><polygon fill="#181818" points="280,975.3477,284,985.3477,288,975.3477,284,979.3477" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="356.5" x2="368.5" y1="948.4297" y2="948.4297"/><polygon fill="#181818" points="364.5,992.8945,368.5,1002.8945,372.5,992.8945,368.5,996.8945" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="368.5" x2="368.5" y1="948.4297" y2="1052.4414"/><line style="stroke:#181818;stroke-width:1.0;" x1="368.5" x2="296" y1="1052.4414" y2="1052.4414"/><polygon fill="#181818" points="306,1048.4414,296,1052.4414,306,1056.4414,302,1052.4414" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="1020.4414" y2="1040.4414"/><polygon fill="#181818" points="280,1030.4414,284,1040.4414,288,1030.4414,284,1034.4414" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="916.4297" y2="936.4297"/><polygon fill="#181818" points="280,926.4297,284,936.4297,288,926.4297,284,930.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="1064.4414" y2="1084.4414"/><polygon fill="#181818" points="280,1074.4414,284,1084.4414,288,1074.4414,284,1078.4414" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="1119.5352" y2="1139.5352"/><polygon fill="#181818" points="280,1129.5352,284,1139.5352,288,1129.5352,284,1133.5352" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="1174.6289" y2="1206.6289"/><polygon fill="#181818" points="280,1196.6289,284,1206.6289,288,1196.6289,284,1200.6289" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1330.8164" y2="1350.8164"/><polygon fill="#181818" points="159,1340.8164,163,1350.8164,167,1340.8164,163,1344.8164" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1621.543" y2="1641.543"/><polygon fill="#181818" points="159,1631.543,163,1641.543,167,1631.543,163,1635.543" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1676.6367" y2="1696.6367"/><polygon fill="#181818" points="159,1686.6367,163,1696.6367,167,1686.6367,163,1690.6367" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1561.5313" y2="1586.4492"/><polygon fill="#181818" points="159,1576.4492,163,1586.4492,167,1576.4492,163,1580.4492" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="263" x2="279" y1="1549.5313" y2="1549.5313"/><polygon fill="#181818" points="275,1649.0898,279,1659.0898,283,1649.0898,279,1653.0898" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="279" x2="279" y1="1549.5313" y2="1763.7305"/><line style="stroke:#181818;stroke-width:1.0;" x1="279" x2="175" y1="1763.7305" y2="1763.7305"/><polygon fill="#181818" points="185,1759.7305,175,1763.7305,185,1767.7305,181,1763.7305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1731.7305" y2="1751.7305"/><polygon fill="#181818" points="159,1741.7305,163,1751.7305,167,1741.7305,163,1745.7305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1819.7305" y2="1844.6484"/><polygon fill="#181818" points="159,1834.6484,163,1844.6484,167,1834.6484,163,1838.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="202.5" x2="261" y1="1807.7305" y2="1807.7305"/><polygon fill="#181818" points="257,1852.1953,261,1862.1953,265,1852.1953,261,1856.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="261" x2="261" y1="1807.7305" y2="1911.7422"/><line style="stroke:#181818;stroke-width:1.0;" x1="261" x2="175" y1="1911.7422" y2="1911.7422"/><polygon fill="#181818" points="185,1907.7422,175,1911.7422,185,1915.7422,181,1911.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1879.7422" y2="1899.7422"/><polygon fill="#181818" points="159,1889.7422,163,1899.7422,167,1889.7422,163,1893.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1775.7305" y2="1795.7305"/><polygon fill="#181818" points="159,1785.7305,163,1795.7305,167,1785.7305,163,1789.7305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="2071.7539" y2="2096.6719"/><polygon fill="#181818" points="159,2086.6719,163,2096.6719,167,2086.6719,163,2090.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="235.5" x2="255" y1="2059.7539" y2="2059.7539"/><polygon fill="#181818" points="251,2104.2188,255,2114.2188,259,2104.2188,255,2108.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="255" x2="255" y1="2059.7539" y2="2163.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="255" x2="175" y1="2163.7656" y2="2163.7656"/><polygon fill="#181818" points="185,2159.7656,175,2163.7656,185,2167.7656,181,2163.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="2131.7656" y2="2151.7656"/><polygon fill="#181818" points="159,2141.7656,163,2151.7656,167,2141.7656,163,2145.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="2027.7539" y2="2047.7539"/><polygon fill="#181818" points="159,2037.7539,163,2047.7539,167,2037.7539,163,2041.7539" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1967.7422" y2="1992.6602"/><polygon fill="#181818" points="159,1982.6602,163,1992.6602,167,1982.6602,163,1986.6602" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="202.5" x2="277" y1="1955.7422" y2="1955.7422"/><polygon fill="#181818" points="273,2069.1719,277,2079.1719,281,2069.1719,277,2073.1719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="277" x2="277" y1="1955.7422" y2="2207.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="277" x2="175" y1="2207.7656" y2="2207.7656"/><polygon fill="#181818" points="185,2203.7656,175,2207.7656,185,2211.7656,181,2207.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="2175.7656" y2="2195.7656"/><polygon fill="#181818" points="159,2185.7656,163,2195.7656,167,2185.7656,163,2189.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1923.7422" y2="1943.7422"/><polygon fill="#181818" points="159,1933.7422,163,1943.7422,167,1933.7422,163,1937.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1512.6133" y2="1537.5313"/><polygon fill="#181818" points="159,1527.5313,163,1537.5313,167,1527.5313,163,1531.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="235.5" x2="301" y1="1500.6133" y2="1500.6133"/><polygon fill="#181818" points="297,1866.0664,301,1876.0664,305,1866.0664,301,1870.0664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="301" x2="301" y1="1500.6133" y2="2251.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="301" x2="175" y1="2251.7656" y2="2251.7656"/><polygon fill="#181818" points="185,2247.7656,175,2251.7656,185,2255.7656,181,2251.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="2219.7656" y2="2239.7656"/><polygon fill="#181818" points="159,2229.7656,163,2239.7656,167,2229.7656,163,2233.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1468.6133" y2="1488.6133"/><polygon fill="#181818" points="159,1478.6133,163,1488.6133,167,1478.6133,163,1482.6133" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1385.9102" y2="1433.5195"/><polygon fill="#181818" points="159,1423.5195,163,1433.5195,167,1423.5195,163,1427.5195" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="244.5" x2="163" y1="1273.7227" y2="1273.7227"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="1273.7227" y2="1295.7227"/><polygon fill="#181818" points="159,1285.7227,163,1295.7227,167,1285.7227,163,1289.7227" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="323.5" x2="405" y1="1273.7227" y2="1273.7227"/><line style="stroke:#181818;stroke-width:1.0;" x1="405" x2="405" y1="1273.7227" y2="1295.7227"/><polygon fill="#181818" points="401,1285.7227,405,1295.7227,409,1285.7227,405,1289.7227" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="163" y1="2263.7656" y2="2293.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="163" x2="272" y1="2293.7656" y2="2293.7656"/><polygon fill="#181818" points="262,2289.7656,272,2293.7656,262,2297.7656,266,2293.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="405" x2="405" y1="1330.8164" y2="2293.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="405" x2="296" y1="2293.7656" y2="2293.7656"/><polygon fill="#181818" points="306,2289.7656,296,2293.7656,306,2297.7656,302,2293.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="1241.7227" y2="1261.7227"/><polygon fill="#181818" points="280,1251.7227,284,1261.7227,288,1251.7227,284,1255.7227" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="2305.7656" y2="2325.7656"/><polygon fill="#181818" points="280,2315.7656,284,2325.7656,288,2315.7656,284,2319.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="2360.8594" y2="2380.8594"/><polygon fill="#181818" points="280,2370.8594,284,2380.8594,288,2370.8594,284,2374.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="805.8906" y2="881.3359"/><polygon fill="#181818" points="280,871.3359,284,881.3359,288,871.3359,284,875.3359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="2415.9531" y2="2425.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="489" y1="2425.9531" y2="2425.9531"/><polygon fill="#181818" points="485,1618.2578,489,1608.2578,493,1618.2578,489,1614.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="489" x2="489" y1="793.8906" y2="2425.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="489" x2="341.5" y1="793.8906" y2="793.8906"/><polygon fill="#181818" points="351.5,789.8906,341.5,793.8906,351.5,797.8906,347.5,793.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="226.5" x2="24" y1="793.8906" y2="793.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="24" x2="24" y1="793.8906" y2="829.8906"/><polygon fill="#181818" points="20,819.8906,24,829.8906,28,819.8906,24,823.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="741.8906" y2="781.8906"/><polygon fill="#181818" points="280,771.8906,284,781.8906,288,771.8906,284,775.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="2505.5625" y2="2540.5625"/><polygon fill="#181818" points="280,2530.5625,284,2540.5625,288,2530.5625,284,2534.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="2707.5859" y2="2742.5859"/><polygon fill="#181818" points="280,2732.5859,284,2742.5859,288,2732.5859,284,2736.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="2634.6563" y2="2672.4922"/><polygon fill="#181818" points="280,2662.4922,284,2672.4922,288,2662.4922,284,2666.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="2777.6797" y2="2789.6797"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="456.5" y1="2789.6797" y2="2789.6797"/><polygon fill="#181818" points="452.5,2716.168,456.5,2706.168,460.5,2716.168,456.5,2712.168" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="456.5" x2="456.5" y1="2622.6563" y2="2789.6797"/><line style="stroke:#181818;stroke-width:1.0;" x1="456.5" x2="335" y1="2622.6563" y2="2622.6563"/><polygon fill="#181818" points="345,2618.6563,335,2622.6563,345,2626.6563,341,2622.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="233" x2="111.5" y1="2622.6563" y2="2622.6563"/><polygon fill="#181818" points="107.5,2702.168,111.5,2712.168,115.5,2702.168,111.5,2706.168" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="111.5" x2="111.5" y1="2622.6563" y2="2801.6797"/><line style="stroke:#181818;stroke-width:1.0;" x1="111.5" x2="284" y1="2801.6797" y2="2801.6797"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="2801.6797" y2="2836.6797"/><polygon fill="#181818" points="280,2826.6797,284,2836.6797,288,2826.6797,284,2830.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="2575.6563" y2="2610.6563"/><polygon fill="#181818" points="280,2600.6563,284,2610.6563,288,2600.6563,284,2604.6563" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[53d03de9773991b3072934d48c254340]
@startuml 业务流程图

start
:初始化变量和载入配置文件;
partition "初始化模型推断模块" {
    :生成face_recognizer实例;
    :生成fire_detector实例;
    }

partition "初始化log模块" {
    :检查各日志文件夹;
    partition " " {
        note
            日志归档
        end note
        :超过七天的日志压损存储;
        :超过三十天的日志删除;
    }
    partition " " {
        note
            日志轮转
        end note
        :按照时间生此次日志文件夹;
        :设置日志轮转条件, 实例化logger对象;

    }
}

rectangle "初始化数据流模块, 封装dataset迭代器"{
    :传出dataset;
}
while (从dataset中取得帧) is (true)
    partition "帧推断模块" {
        :接受传入帧;
        if (在非法闯入检测时间段内) then (是)
        :传入人脸识别模块推断;
        endif
        :传入火焰检测模块推断;
        :整合拼接检测结果;
    }
    :传出检测结果;
  if (检测到物体) then (是)
    :在图像上绘制边界框和标签;
    :更新检测队列缓冲;
    
    partition "警告和日志模块" {
        :检测结果写入文本log;
        if (检测到异常(火焰/陌生人)) then (是)
            if (报警触发且尚未发送警报或耐心耗尽) then (是)
                :将当前帧保存为图像;
                :发送带有图像和相关信息的电子邮件;
                :重置耐心计数器;
            endif
            if (未在录像中) then (是)
                :开始录制并初始化视频编写器;
            endif
            if (正在录像中) then (是)
                :继续将帧写入视频;
                if (达到最大长度或异常消失) then (是)
                :停止录制并释放视频编写器;
                endif
            endif
        endif
    }
  else
    :记录“未检测到物体”;
  endif
  
  :将结果图像转换为Base64编码;
  :使用Socket发送图像到前端;

endwhile
stop

rectangle "dataset迭代器" {
start
:opencv载入摄像头(视频文件)数据流cam;
while (cam.read取出帧) is (true)
    :对帧进行resize, BGR转化RGB, 数值连续化等前处理操作;
    :传出帧数据;
endwhile
end

}

@enduml

PlantUML version 1.2022.7(Tue Aug 23 01:01:30 CST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>